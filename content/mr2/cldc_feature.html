<head>
<title>Getting Started with phoneME Feature Software (MR2)</title>
<style type="text/css">
<!--
.style3 {color: #e76f00}
-->
</style>
</head>
 
<body>

<!--  ================= BEGIN PAGE BODY (Ignore Everything Above)  ============ -->

<!-- BEGIN PAGE TITLE -->
<div id="projecthome" class="app"> <h1><font color="#e76f00">Building a CLDC 
Reference Port (MR2)<span class="style1"> </span></font></h1>
<!-- END PAGE TITLE -->
<p>
<a href="./index_feature.html">first</a> | <a href="./pcsl_feature.html">prev</a> | 
<a href="./client_feature.html">next-last</a> 
<!-- | <a href="./options_feature.html">last</a> --> 
<p>

CLDC software is an OSS community version of Sun Microsystems' Connected Limited 
Device Configuration HotSpot&#153; Implementation virtual machine. Although 
primarily created from the same shared code base, Sun Microsystems' commercial 
product might not fully and accurately represent the OSS source base, due to 
licensing and other legal restrictions.
<P>
This document has the following sections:
<p>
<ul>
<li><a href="#linux">Building CLDC Software on a Linux on i386 Build Platform</a></li>
<li><a href="#win32">Building CLDC Software on a Win32 on i386 Build Platform</a></li>
<li><a href="#build_docs">Building CLDC Documentation</a></li>
</ul>
<p> 
For more information about building and running CLDC, see 
<a href="http://java.sun.com/javame/reference/docs/cldc-hi-2.0-web/index.html">
CLDC HotSpot Implementation software documentation</a>.
<p>


<!-- BEGIN SECTION HEAD -->
<hr noshade="noshade" size="1">
<a name="linux"></a><h3>Building CLDC Software on a Linux on i386 Build Platform</h3>
<!-- END SECTION HEAD -->
<p>

This section describes how to build a default implementation of the CLDC software. 
A successful build of CLDC is required to build the phoneME Feature software client. 
<p>

<a name="set_linux_var"></a>
<strong>Setting Variables for a Linux on i386 Build Platform</strong>
<P>
Building a default version of the CLDC software creates the executable <code>cldc_vm</code>,
for both Linux on i386 and Linux on ARM target platforms.  To properly build CLDC software 
on a Linux on i386 build platform, you must set the environment variables shown in 
<A HREF="#table4-1">TABLE 4-1</A>. 
<p>

<A NAME="table4-1"></A>
<TABLE CLASS="Titled" BORDER=1 BORDERCOLORLIGHT="#FFFFFF" BORDERCOLORDARK="#000000" 
CELLPADDING=5 CELLSPACING=0>
<CAPTION> <b>TABLE 4-1</b>Required CLDC Build Variables for Linux on i386</CAPTION>
<THEAD>
<TR>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead"><A NAME="pgfId-474025"></A>Name
</P>
</TH>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead"><A NAME="pgfId-474027"></A>Description
</P>
</TH>
</TR>
</THEAD>
<TBODY>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474029"></A><KBD>JVMWorkSpace</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474034"></A>The location of your CLDC software 
source code directory. For example, 
<code>JVMWorkSpace=$MEHOME/cldc</code>.  
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474036"></A><KBD>JVMBuildSpace</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474041"></A>The location of your CLDC software 
build output. For example, <code>JVMBuildSpace=$BUILD_OUTPUT_DIR/cldc</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474047"></A><KBD>ENABLE_PCSL</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474049"></A>Required for building CLDC with 
the PCSL software component. Must be set to <code>true</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<KBD>PCSL_OUTPUT_DIR</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474049"></A>The location of PCSL build output.
Required for building CLDC if <code>ENABLE_PCSL=true</code>.  For example, 
<code>PCSL_OUTPUT_DIR=$BUILD_OUTPUT_DIR/pcsl</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474051"></A><KBD>ENABLE_ISOLATES</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474053"></A>Required for building a CLDC 
implementation with multitasking capability. Must be set to <code>true</code>.  
If not explicitly set to <code>true</code>, the build defaults to <code>false</code> 
and CLDC is built without multitasking capability. 
</P>
</TD>
</TR>
</TBODY>
</TABLE>
<p>


<a name="set_vars"></a>
<strong>Setting Build Environment Variables for Both Target Platforms</strong>
<p>
The primary CLDC environment variables, <KBD>$JVMWorkSpace</KBD> and <KBD>$JVMBuildSpace</KBD>, 
are set once, as system variables, for both Linux on i386 and Linux on ARM target platforms.
To set these variables, take the following steps:
<p>
<ol>
<b><li>Set the <code>JVMWorkSpace</code> variable, as shown here.</b>
<p>
<code>$ export JVMWorkSpace=$MEHOME/cldc</code>
<p>
<b><li>Set the <code>JVMBuildSpace</code> variable, as shown here.</b>
<p>
<code>$ export JVMBuildSpace=$BUILD_OUTPUT_DIR/cldc</code>
<p>
</ol>
<p>


<a name="build_linux_i386"></a>
<strong>Building CLDC for a Linux on i386 Target Platform</strong>
<p>
To build CLDC for the Linux on i386 target platform, take the following steps.
<p>
<ol>
<b><li>Change to the CLDC build directory, as shown here.</b>
<p>
<code>$ cd $JVMWorkSpace/build/linux_i386</code>
<p>
<b>Note:</b> You can skip this step and use the <code>make</code> <code>-C</code> build option. For
more information, see <a href="./begin_feature.html#dash_c">Building with the
<code>make</code> <code>-C</code> Option</a>.
<p>
<b><li>Run the make command as a single command-line string, as shown here.</b>
<p>
<code>$ make ENABLE_PCSL=true PCSL_OUTPUT_DIR=$BUILD_OUTPUT_DIR/pcsl ENABLE_ISOLATES=true</KBD>
</ol>
<P>
The generated CLDC output is found under <KBD>$JVMBuildSpace/linux_i386/dist</KBD>.
<p>


<a name="build_linux_arm"></a>
<strong>Building CLDC for a Linux/ARM Target Platform</strong>
<p>
To build CLDC for the Linux on ARM target platform, take the following steps.
<p>
<ol>
<b><li>Change to the CLDC build directory, as shown here.</b>
<p>
<code>$ cd $JVMWorkSpace/build/linux_arm</code>
<p>
<b>Note:</b> You can skip this step and use the <code>make</code> <code>-C</code> build option. For
more information, see <a href="./begin_feature.html#dash_c">Building with the
<code>make</code> <code>-C</code> Option</a>.
<p>
<b><li>Run the make command as a single command-line string, as shown here.</b>
<p>
<code>$ make ENABLE_PCSL=true PCSL_OUTPUT_DIR=$BUILD_OUTPUT_DIR/pcsl ENABLE_ISOLATES=true 
GNU_TOOLS_DIR=$MONTAVISTA</code>
<p>
<b>Note:</b> In this command line, the variable <code>$MONTAVISTA</code> is a shortcut
for a much longer command string, as described <a href="./buildenv_feature.html#montavista">
here</a>.
</ol>
<p>
The generated CLDC output is found under <KBD>$JVMBuildSpace/linux_arm/dist</KBD>.
<p>


<!-- BEGIN SECTION HEAD -->
<hr noshade="noshade" size="1">
<a name="win32"></a><h3>Building CLDC Software on a Win32 on i386 Build Platform</h3>
<!-- END SECTION HEAD -->
<p>
Building a default version of CLDC creates the CLDC software executable <KBD>cldc_vm.exe</KBD> 
for the JavaCall porting layer on i386 target platform. To properly build the CLDC software on 
a Win32 on i386 build platform, you must set the environment variables shown in 
<a href="#table4-2">TABLE 4-2</A>. 
<P>

<a name="table4-2"></a>
<TABLE CLASS="Titled" BORDER=1 BORDERCOLORLIGHT="#FFFFFF" BORDERCOLORDARK="#000000"
CELLPADDING=5 CELLSPACING=0>
<CAPTION> <b>TABLE 4-2</b>Required CLDC Build Variables for Win32 on i386</CAPTION>
<THEAD>
<TR>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead"><A NAME="pgfId-473082"></A>Name
</P>
</TH>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead"><A NAME="pgfId-473084"></A>Description
</P>
</TH>
</TR>
</THEAD>
<TBODY>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473089"></A><KBD>JVMWorkSpace</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473092"></A>The location of your CLDC software
source code workspace.  For example,
<KBD>JVMWorkSpace=%MEHOME%/cldc</KBD>.
<br>
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473197"></A><KBD>JVMBuildSpace</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473199"></A>The location of your CLDC software
build output. For example,
<KBD>JVMBuildSpace=%BUILD_OUTPUT_DIR%/cldc</KBD>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473736"></A><KBD>ENABLE_PCSL</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473738"></A>Required for building CLDC with
the PCSL software component. Must be set to <code>true</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<KBD>PCSL_OUTPUT_DIR</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474049"></A>The location of PCSL build output.
Required for building CLDC if <code>ENABLE_PCSL=true</code>.  For example,
<KBD>PCSL_OUTPUT_DIR=%BUILD_OUTPUT_DIR%/pcsl</KBD>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473732"></A><KBD>ENABLE_ISOLATES</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473734"></A>Required for building a CLDC implementation
with multitasking capability. Must be set to <KBD>true</KBD>.  If not explicitly set to
<code>true</code>, the build defaults to <code>false</code> and CLDC is built without
multitasking capability.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P>
<KBD>JAVACALL_OUTPUT_DIR</KBD> <P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P>
The location of JavaCall porting layer output. For example, 
<code>JAVACALL_OUTPUT_DIR=%BUILD_OUTPUT_DIR%/javacall</code>.
</TD>
</TR>
</TBODY>
</TABLE>
<p>


<a name="build_win"></a>
<strong>Building CLDC for a JavaCall porting layer on i386 Target Platform</strong>
<P>
<OL>
<b><LI>Set the <code>JVMWorkSpace</code> variable, as shown here.</b>
<p>
<KBD>$ set JVMWorkSpace=%MEHOME%/cldc</KBD>
<p>
<b><LI>Set the <code>JVMBuildSpace</code> variable, as shown here.</b>
<p>
<KBD>$ set JVMBuildSpace=%BUILD_OUTPUT_DIR%/cldc</KBD>
<p>
<b><LI>Change directory to <code>%JVMWorkSpace%/build/javacall_i386_vc</code>.</b>
<p>
<KBD>$ cd %JVMWorkSpace%/build/javacall_i386_vc</KBD>
<p>
<b><LI>Run the make command as a single command-line string, as shown here.</b>
<P>
<KBD>$ make ENABLE_PCSL=true PCSL_OUTPUT_DIR=%BUILD_OUTPUT_DIR%/pcsl ENABLE_ISOLATES=true 
JAVACALL_OUTPUT_DIR=%BUILD_OUTPUT_DIR%/javacall</KBD>
</OL>
<P>
The generated CLDC output is found under <KBD>%JVMBuildSpace%/javacall_i386_vc/dist</KBD>.
</OL>
<p>


<!-- BEGIN SECTION HEAD -->
<hr noshade="noshade" size="1">
<a name="running"></a><h3>Running CLDC Software</h3>
<!-- END SECTION HEAD -->
<p>
Once you build the CLDC software, you can invoke it from the command line
to run a class compiled from the Java programming language. The path to the
executable depends on the target platform (operating system and processor) for
which you build the software.
<P>


<a name="run_linux"></a>
<strong>Running CLDC on a Linux on i386 or Linux on ARM Target Platform</strong>
<p>
<OL>
<b><LI>Change to the CLDC build space for your target platform:</b>
<P>
On a Linux on i386 target platform, use:
<p>
<KBD>$ cd $JVMBuildSpace/linux_i386/dist</KBD>
<p>
On a Linux on ARM target platform, use:
<p>
<KBD>$ cd $JVMBuildSpace/linux_arm/dist</KBD>
<P>
<b><LI>Enter the following command:</b>
<P>
<KBD>$ bin/cldc_vm -classpath</KBD>
<EM>location-of-compiled-applications</EM><KBD>/classes</KBD> <EM>classname</EM>
<p>
For example, to run the <code>HelloWorld</code> application:
<p>
<code>$ bin/cldc_vm -classpath /src/classes HelloWorld</code>
</OL>
<p>


<a name="run_win"></a>
<strong>Running CLDC on a JavaCall porting layer on i386 Target Platform</strong>
<p>
<OL>
<b><LI>Change to the CLDC build space for the JavaCall porting layer on i386 platform:</b>
<P>
<KBD>$ cd %JVMBuildSpace%/javacall_i386/dist</KBD>
<p>
<b><LI>Enter the following command:</b>
<P>
<KBD>$ bin/cldc_vm.exe -classpath</KBD>
<EM>location-of-compiled-applications</EM><KBD>/classes</KBD> <EM>classname</EM>
<p>
For example, to run the <code>HelloWorld</code> application:
<p>
<code>$ bin/cldc_vm -classpath C:/src/classes HelloWorld</code>
</OL>
<p>





<!-- BEGIN SECTION HEAD -->
<hr noshade="noshade" size="1">
<a name="build_docs"></a><h3>Building CLDC Documentation</h3>
<!-- END SECTION HEAD -->
<p>

You can create HTML documents from CLDC porting interfaces. To do this for the
CLDC software, use the <KBD>make docs_html</KBD> build target.
<P>

<a name="javadoc"></a>
<strong>Generating Javadoc Tool Documentation</strong>
<P>
Building Javadoc&#153 tool documentation is the same for all build platforms.
<P>
<OL>
<b><LI>Change to the default build directory for your build platform.</b> 
<p>
For example, this could be a Linux on i386 platform, as shown here.
<P>
<KBD>$ cd $JVMWorkSpace/build/linux_i386</KBD>
<P>
<b><LI>Build Javadoc tool HTML documentation.</b>
<P>
<KBD>$ make docs_html</KBD>
<P>
<!--
The generated HTML documents are put in the following directory:
<P>
<KBD>$JVMBuildSpace/doc/javadoc/html</KBD>
-->
</OL>
<p>

<a name="view_javadoc"></a>
<strong>Viewing phoneME Feature Documents</strong>
<P>
Use any browser to display the Javadoc tool output file at the following URL:
<P>
<ul>
<KBD>file://$JVMBuildSpace/doc/javadoc/html/index.html</KBD>
</ul>
<pre>


</pre>
<a href="./index_feature.html">first</a> | <a href="./pcsl_feature.html">prev</a> |
<a href="./client_feature.html">next-last</a> 
<!-- | <a href="./options_feature.html">last</a>  -->
<p>



<!-- =================================== END PAGE BODY ================== -->

</div>
