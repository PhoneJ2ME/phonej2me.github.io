<head>
<title>Getting Started with phoneME Feature Software (MR2)</title>
<style type="text/css">
<!--
.style3 {color: #e76f00}
-->
</style>
</head>
 
<body>

<!--  ================= BEGIN PAGE BODY (Ignore Everything Above)  ============ -->

<!-- BEGIN PAGE TITLE -->
<div id="projecthome" class="app"> <h1><font color="#e76f00">Building a phoneME 
Feature Software Reference Port (MR2)<span class="style1"> </span></font></h1>
<!-- END PAGE TITLE -->

<p>
<a href="./index_feature.html">first</a> | <a href="./cldc_feature.html">prev</a> 
<!-- | <a href="./options_feature.html">next-last</a> 
| <a href="./options_feature.html">last</a> --> 
<p>

The phoneME Feature Software is an Open Source version of Sun Microsystems' commercial 
implementation, the Sun Java Wireless Client software, version 2.0.  The commercial 
version is based upon, and incorporates code from, the Open Source MR2 version of phoneME 
Feature software.  The phoneME Feature software is built on top of CLDC, an Open Source 
version of Sun Microsystems' Connected Limited Device Configuration, HotSpot Implementation, 
version 2.0.
<P>
This document has the following sections:
<p>
<ul>
<li><a href="#linux">Building phoneME Feature Software on a Linux on i386 Build Platform</a>
<li><a href="#win32">Building phoneME Feature Software on a Win32 on i386 Build Platform</a>
<li><a href="#phoneme_docs">Building phoneME Feature Software Documentation</a>
</ul>
<p>

For proper building and performance, your system must meet the 
requirements provided in <A HREF="begin_feature.html">Before You Begin</A>.
<P>


<!-- BEGIN SECTION HEAD -->
<hr noshade="noshade" size="1">
<a name="linux"></a><h3>Building phoneME Feature Software on a Linux on i386 Build Platform</h3>
<!-- END SECTION HEAD -->
<p>

This section provides basic instructions for building a default configuration of the phoneME 
Feature software for Linux on i386 and Linux on ARM target platforms. 
<p>

<a name="set_linux_var"></a>
<strong>Setting Variables for a Linux on i386 Build Platform</strong>
<P>
To build phoneME Feature software on a Linux on i386 build platform, you must set the 
environment variables shown in <A HREF="#table5-1">TABLE 5-1</A>. 
<P>

<A NAME="table5-1"></A>
<TABLE CLASS="Titled" BORDER=1 BORDERCOLORLIGHT="#FFFFFF" BORDERCOLORDARK="#000000"
CELLPADDING=5 CELLSPACING=0>
<CAPTION> <b>TABLE 5-1</b>Required Linux on i386 Build Variables</CAPTION>
<THEAD>
<TR>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead">Name
</TH>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead">Description
</TH>
</TR>
</THEAD>
<TBODY>
<!--
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473772"></A><KBD CLASS="Filename-Command">
MIDP_DIR</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-473774"></A>The top-level MIDP directory. For example,
<code>MIDP_DIR=$MEHOME/midp</code>.
</P>
</TD>
</TR>
-->
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474801"></A><KBD Class="Filename-Command">
MIDP_OUTPUT_DIR<KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474803"></A>Location where output from building
phoneME Feature is stored. For example, <code>MIDP_OUTPUT_DIR=$BUILD_OUTPUT_DIR/midp</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474801"></A><KBD Class="Filename-Command">
PCSL_OUTPUT_DIR<KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474803"></A>Location where the output from building
PCSL is stored. Required for phoneME Feature to pick up PCSL libraries. For example,
<code>PCSL_OUTPUT_DIR=$BUILD_OUTPUT_DIR/pcsl</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><KBD>CLDC_DIST_DIR</KBD>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText">Required for building phoneME Feature software. Must point to the 
location of CLDC software build output. For example: 
<kbd>CLDC_DIST_DIR=$BUILD_OUTPUT_DIR/cldc/linux_i386/dist</kbd>.
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><KBD>TOOLS_DIR</KBD>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText">Location of tools generated during the build process. Required for 
building phoneME Feature software.  For example, <kbd>TOOLS_DIR=$MEHOME/tools</kbd>.
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><KBD>TARGET_CPU</KBD>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText">Must be set for the platform you are building on. For example,
<kbd>TARGET_CPU=i386</kbd>.
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474801"></A><KBD Class="Filename-Command">
USE_MULTIPLE_ISOLATES<KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474803"></A>Required for phoneME Feature to 
support multitasking.  Must be set to <code>true</code>.  
</P>
</TD>
</TR>
</TBODY>
</TABLE>
<p>


<a name="build_linux_i386"></a>
<strong>Building for a Linux on i386 Target Platform</strong>
<p>

To build phoneME Feature software for the Linux on i386 target platform, take the 
following steps.
<p>
<ol>
<b><li>Set the MIDP_OUTPUT_DIR variable, as shown here.</b>
<p>
<code>$ export MIDP_OUTPUT_DIR=$BUILD_OUTPUT_DIR/midp</code>
<p>
<b><li>Change to the build directory, as shown here.</b>
<p>
<code>$ cd $MEHOME/midp/build/linux_fb_gcc</code>
<p>
<b>Note:</b> You can skip this step and use the <code>make</code> <code>-C</code> build option. For
more information, see <a href="./begin_feature.html#dash_c">Building with the
<code>make</code> <code>-C</code> Option</a>.
<p>
<b><li>Run the make command as a single command-line string, as shown here.</b>
<P>
<code>$ make PCSL_OUTPUT_DIR=$BUILD_OUTPUT_DIR/pcsl CLDC_DIST_DIR=$BUILD_OUTPUT_DIR/cldc/linux_i386/dist 
TOOLS_DIR=$MEHOME/tools TARGET_CPU=i386 USE_MULTIPLE_ISOLATES=true</code>
<p>
<b>Note:</b> It is possible to include optional packages in your Linux on i386 target platform 
build.  For more information, see <a href="./begin_feature.html#op_pack">Including Optional
Packages in Your Build</a>.
</ol>
<p>
</ol>
<p>
The generated output for the Linux on i386 target platform is found under 
<KBD>$BUILD_OUTPUT_DIR/midp/bin/i386</KBD>.
<p>


</a name="build_linux_arm"></a>
<strong>Building for a Linux on ARM Target Platform</strong>
<p>

To build phoneME Feature software for the Linux on ARM target platform, take the following steps.
<p>
<ol>
<b><li>Set the MIDP_OUTPUT_DIR variable, as shown here.</b>
<p>
<code>$ export MIDP_OUTPUT_DIR=$BUILD_OUTPUT_DIR/midp</code>
<p>
<b><li>Change to the build directory, as shown here.</b>
<p>
<code>$ cd $MEHOME/midp/build/linux_fb_gcc</code>
<p>
<b>Note:</b> You can skip this step and use the <code>make</code> <code>-C</code> build option. For
more information, see <a href="./begin_feature.html#dash_c">Building with the
<code>make</code> <code>-C</code> Option</a>.
<p>
<b><li>Run the <KBD>make</KBD> command as a single command-line string, as shown here.</b>
<P>
<KBD>$ make PCSL_OUTPUT_DIR=$BUILD_OUTPUT_DIR/pcsl CLDC_DIST_DIR=$BUILD_OUTPUT_DIR/cldc/linux_arm/dist 
TOOLS_DIR=$MEHOME/tools TARGET_CPU=arm USE_MULTIPLE_ISOLATES=true GNU_TOOLS_DIR=$MONTAVISTA</KBD>
<p>
In this command line, the variable <code>$MONTAVISTA</code> is a shortcut for a much longer 
command string, as described <a href="./buildenv_feature.html#montavista">
here</a>.
<p>
<b>Note:</b> It is possible to include optional packages in your Linux on ARM target platform 
build.  For more information, see <a href="./begin_feature.html#op_pack">Including Optional
Packages in Your Build</a>.
</ol>
<p>
</ol>
<p>
The generated output for the Linux/i386 target platform is found under
<KBD>$BUILD_OUTPUT_DIR/midp/bin/arm</KBD>.
<p>


<a name="usertest"></a>
<strong>Running <em>runPhoneME</em> on a Linux on i386 or Linux on ARM Target Platform</strong>
<p>
Once you build an implementation of phoneME Feature software, you can quickly run a 
MIDlet using the phoneME Feature emulation device.
<p>
<ol>
<b><li>Change to the output directory.</b>
<p>
<KBD>$ cd $BUILD_OUTPUT_DIR/midp</code>
<p>
<b><li>Type <code>./runPhoneME</code>.</b>
<p>
This displays the phoneME Feature emulation device.
</ol>
<p>
<b>Note:</b> To run <code>runPhoneME</code> on the Linux on ARM target platform, some additional 
steps are needed.  For more information, see 
<a href="http://java.sun.com/javame/reference/docs/sjwc-2.0-web/docs/BuildGuide-html/index.html">
<i>Sun Java Wireless Client Build Guide</i></a>.


<!-- BEGIN SECTION HEAD -->
<hr noshade="noshade" size="1">
<a name="win32"></a><h3>Building phoneME Feature Software on a Win32 on i386 Build Platform</h3>
<!-- END SECTION HEAD -->
<p>

This section provides basic instructions for building a default phoneME Feature software 
implementation for the JavaCall porting layer on i386 target platform.
<p>


<a name="set_win_var"></a>
<strong>Setting Variables for a Win32 on i386 Build Platform</strong>
<p>

To properly build the phoneME Feature software on a Windows platform, you must set the
environment variables shown in <a href="#table5-2">TABLE 5-2</A>. 
<P>

<a name="table5-2"></a>
<TABLE CLASS="Titled" BORDER=1 BORDERCOLORLIGHT="#FFFFFF" BORDERCOLORDARK="#000000"
CELLPADDING=5 CELLSPACING=0>
<CAPTION> <b>TABLE 5-2</b>Required Win32 on i386 Build Variables</CAPTION>
<THEAD>
<TR>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead"><A NAME="pgfId-473082"></A>Name
</P>
</TH>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead"><A NAME="pgfId-473084"></A>Description
</P>
</TH>
</TR>
</THEAD>
<TBODY>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474809"></A><kbd class="filename-command">
MIDP_OUTPUT_DIR</kbd>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474811"></A>Location where the output from
building phoneME Feature is stored. For example,
<code>MIDP_OUTPUT_DIR=%BUILD_OUTPUT_DIR%/midp</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474801"></A><KBD Class="Filename-Command">
PCSL_OUTPUT_DIR<KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474803"></A>Location where the output from building 
PCSL is stored. Required for phoneME Feature to pick up PCSL libraries. For example,
<code>PCSL_OUTPUT_DIR=%BUILD_OUTPUT_DIR%/pcsl</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474036"></A><KBD>CLDC_DIST_DIR</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474041"></A>Required for building phoneME Feature
software. Must point to the location of CLDC software build output. For example,
<kbd>CLDC_DIST_DIR=%BUILD_OUTPUT_DIR%/cldc/javacall_i386_vc/dist</kbd>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474036"></A><KBD>TOOLS_DIR</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474041"></A>Location of tools generated during 
build process. Required for building phoneME Feature software. For example, 
<kbd>TOOLS_DIR=%MEHOME%/tools</kbd>. 
</P>
</TD>
</TR>
<!--
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474036"></A><KBD>TARGET_CPU</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474041"></A>Must be set for the platform you are
building on.  For example, <kbd>TARGET_CPU=i386</kbd>. 
</P>
</TD>
</TR>
-->
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474801"></A><KBD Class="Filename-Command">
USE_MULTIPLE_ISOLATES<KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474803"></A>Required for phoneME Feature to
support multitasking.  Must be set to <code>true</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474018"></A><KBD CLASS="Filename-Command">
JAVACALL_PLATFORM</KBD>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474020"></A>Defines the JavaCall porting layer
platform, cpu, and compiler. For example, <code>JAVACALL_PLATFORM=win32_i386_vc</code>.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474809"></A><kbd class="filename-command">
JAVACALL_OUTPUT_DIR</kbd>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="pgfId-474811"></A>Indicates the location where JavaCall
porting layer output is stored. For example, 
<code>JAVACALL_OUTPUT_DIR=%BUILD_OUTPUT_DIR%/javacall</code>.
</P>
</TD>
</TR>
</TBODY>
</TABLE>
<p>

<!-- Add Optional Package XREF Here -->


<a name="build_javacall"></a>
<strong>Building for a JavaCall Porting Layer on i386 Target Platform</strong>
<p>
To build the phoneME Feature software for for the JavaCall porting layer on i386 
target platform, take the following steps.
<p>
<ol>
<b><li>Set the MIDP_OUTPUT_DIR variable, as shown here.</b>
<p>
<code>$ export MIDP_OUTPUT_DIR=$BUILD_OUTPUT_DIR/midp</code>
<p>
<b><li>Change to the build directory, as shown here.</b>
<p>
<code>$ cd $MEHOME/midp/build/javacall</code>
<p>
<b>Note:</b> You can skip this step and use the <code>make</code> <code>-C</code> build option. For
more information, see <a href="./begin_feature.html#dash_c">Building with the
<code>make</code> <code>-C</code> Option</a>.
<p>
<b><li>Run the make command as a single command-line string, as shown here.</b>
<P>
<KBD>$ make PCSL_OUTPUT_DIR=%BUILD_OUTPUT_DIR%/pcsl 
CLDC_DIST_DIR=%BUILD_OUTPUT_DIR%/cldc/javacall_i386_vc/dist TOOLS_DIR=%MEHOME%/tools 
USE_MULTIPLE_ISOLATES=true JAVACALL_PLATFORM=win32_i386_vc 
JAVACALL_OUTPUT_DIR=%BUILD_OUTPUT_DIR%/javacall</KBD>
<P>
<b>Note:</b> It is possible to include optional packages in your JavaCall porting layer
on I386 target build.  For more information, see 
<a href="./begin_feature.html#op_pack">Including Optional Packages in Your Build</a>.
</ol>
<p>
The generated output for the JavaCall porting layer on i386 target platform is found under
<KBD>$BUILD_OUTPUT_DIR/midp/bin/javacall</KBD>.
<p>


<a name="win_usertest"></a>
<strong>Running <em>runPhoneME</em> on a JavaCall porting layer on i386 Target Platform</strong>  
<p>
Once you build an implementation of phoneME Feature software, you can quickly run a 
MIDlet using the phoneME Feature emulation device.
<p>
<ol>
<b><li>Change to the output directory.</b>
<p>
$ <KBD>cd %BUILD_OUTPUT_DIR%/midp</KBD>
<p>
<b><li>Click or type <code>runPhoneME</code>.</b>
<p>
This displays the phoneME Feature emulation device.
</ol>   


<!-- BEGIN SECTION HEAD -->
<hr noshade="noshade" size="1">
<a name="phoneme_docs"></a><h3>Building phoneME Feature Software Documentation</h3>
<!-- END SECTION HEAD -->
<p>

You can create HTML API documents for phoneME Feature software from porting interfaces.
To do this for the phoneME Feature software, use the <KBD>make docs_html</KBD> build
target.
<P>

<a name="javadoc"></a>
<strong>Generating Javadoc Tool Documentation</strong>
<p>

Building Javadoc tool documentation is the same for all platforms.
<P>
<OL>
<b><LI>Change to the default build directory for your target platform.</b> 
<p>
For example, this could be the Linux on i386 target platform, as shown here.
<P>
<KBD>$ cd $MEHOME/midp/build/linux_i386</KBD>
<P>
<b><LI>Build Javadoc tool HTML documentation.</b>
<P>
<KBD>$ make docs_html</KBD>
</OL>
<p>

<a name="view_docs"></a>
<strong>Viewing phoneME Feature Software Documents</strong>
<P>
Use any browser to display the Javadoc output file at the following URL:
<P>
<ul>
<KBD>file://$MIDP_OUTPUT_DIR/doc/javadoc/html/index.html</KBD>
</ul>
<pre>


</pre>
<a href="./index_feature.html">first</a> | <a href="./cldc_feature.html">prev</a> 
<!-- | <a href="./options_feature.html">next-last</a>  -->
<p>


<!-- =================================== END PAGE BODY ================== -->

</div>
